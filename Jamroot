# alias install : install-headers install-lib ;

# install install-lib : particledb ;
# 
# install install-headers
#     : [ glob-tree *.h : .svn ]
#     ;
# 

import mpi ;

local xml2-features = [ mpi.cmdline_to_features [ SHELL "printf '%s ' compiler `xml2-config --cflags --libs`" ] ] ;

lib boost_regex : : <name>boost_regex ;

lib olson-tools : : <search>/home/olsonse/build/olson-tools/lib ;

project /particledb
    : requirements
        <include>/home/olsonse/build/olson-tools/include
        $(xml2-features)
        <include>src/particledb
    : usage-requirements
        <include>/home/olsonse/build/olson-tools/include
        $(xml2-features)
        <include>src
        <library>boost_regex
        <library>olson-tools
    :
        build-dir build
    ;

lib db :
      Particle
      src/particledb/ParticleDB.cpp
      physical_calc
      interaction/DATACrossSection
      interaction/VHSInfo
    ;

# Optimized compiling for any code that uses the boost::spirit grammar stuff
# is REALLY REALLY slow--so turn it off.
obj Particle                     : src/particledb/Particle.cpp                     : <optimization>off ;
obj physical_calc                : src/particledb/physical_calc.cpp                : <optimization>off ;
obj interaction/VHSInfo          : src/particledb/interaction/VHSInfo.cpp          : <optimization>off ;
obj interaction/DATACrossSection : src/particledb/interaction/DATACrossSection.cpp : <optimization>off ;
